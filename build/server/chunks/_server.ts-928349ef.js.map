{"version":3,"file":"_server.ts-928349ef.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/getReservationsByDate/_server.ts.js"],"sourcesContent":["import { j as json } from \"../../../../chunks/index.js\";\nimport { g as getXataClient } from \"../../../../chunks/xata-old.js\";\nimport { c as convertFromXataToAppType } from \"../../../../chunks/reservation.js\";\nimport { g as getXataUserDocWithFirebaseToken } from \"../../../../chunks/firestore.js\";\nconst xata = getXataClient();\nasync function POST({ request }) {\n  try {\n    const xataUser = await getXataUserDocWithFirebaseToken(request.headers);\n    if (!xataUser || !xataUser.id) {\n      return json({ status: \"error\", error: \"User not found\" });\n    }\n    const { date, category } = await request.json();\n    const rawRsvs = await xata.db.Reservations.filter({\n      date,\n      category,\n      status: {\n        $any: [\"confirmed\", \"pending\"]\n      }\n    }).getAll();\n    const reservations = await convertFromXataToAppType(rawRsvs);\n    return json({ status: \"success\", reservations });\n  } catch (error) {\n    console.error(\"Error in getReservationsByDate\", error);\n    return json({\n      status: \"error\",\n      error: error instanceof Error ? error.message : \"Unknown error\"\n    });\n  }\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAM,IAAI,GAAG,aAAa,EAAE,CAAC;AAC7B,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;AACjC,EAAE,IAAI;AACN,IAAI,MAAM,QAAQ,GAAG,MAAM,+BAA+B,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5E,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AACnC,MAAM,OAAO,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC,CAAC;AAChE,KAAK;AACL,IAAI,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AACpD,IAAI,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC;AACtD,MAAM,IAAI;AACV,MAAM,QAAQ;AACd,MAAM,MAAM,EAAE;AACd,QAAQ,IAAI,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC;AACtC,OAAO;AACP,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;AAChB,IAAI,MAAM,YAAY,GAAG,MAAM,wBAAwB,CAAC,OAAO,CAAC,CAAC;AACjE,IAAI,OAAO,IAAI,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,CAAC,CAAC;AACrD,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;AAC3D,IAAI,OAAO,IAAI,CAAC;AAChB,MAAM,MAAM,EAAE,OAAO;AACrB,MAAM,KAAK,EAAE,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,eAAe;AACrE,KAAK,CAAC,CAAC;AACP,GAAG;AACH;;;;"}