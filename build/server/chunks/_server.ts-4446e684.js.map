{"version":3,"file":"_server.ts-4446e684.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/login/_server.ts.js"],"sourcesContent":["import { j as json } from \"../../../../chunks/index.js\";\nimport { c as createSession } from \"../../../../chunks/session.js\";\nimport { a as authenticateUser } from \"../../../../chunks/user.js\";\nasync function POST({ cookies, request }) {\n  try {\n    const { userId, userName, photoURL, email, providerId, firebaseUID, userRecordId } = await request.json();\n    const record = await authenticateUser({\n      userRecordId,\n      userId,\n      userName,\n      email,\n      providerId,\n      firebaseUID\n    });\n    const sessionId = cookies.get(\"sessionid\");\n    if (!sessionId && record) {\n      const session = await createSession(record);\n      let expires = /* @__PURE__ */ new Date();\n      expires.setMonth(expires.getMonth() + 1);\n      cookies.set(\"sessionid\", session.id, { path: \"/\", expires });\n      cookies.set(\"photo_url\", photoURL, { path: \"/\", expires });\n    }\n    return json({ status: \"success\", record });\n  } catch (error) {\n    console.error(error);\n    return json({ status: \"error\", error });\n  }\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;;;AAGA,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;AAC1C,EAAE,IAAI;AACN,IAAI,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AAC9G,IAAI,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC;AAC1C,MAAM,YAAY;AAClB,MAAM,MAAM;AACZ,MAAM,QAAQ;AACd,MAAM,KAAK;AACX,MAAM,UAAU;AAChB,MAAM,WAAW;AACjB,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;AAC/C,IAAI,IAAI,CAAC,SAAS,IAAI,MAAM,EAAE;AAC9B,MAAM,MAAM,OAAO,GAAG,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC;AAClD,MAAM,IAAI,OAAO,mBAAmB,IAAI,IAAI,EAAE,CAAC;AAC/C,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;AAC/C,MAAM,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC;AACnE,MAAM,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,QAAQ,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC;AACjE,KAAK;AACL,IAAI,OAAO,IAAI,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC,CAAC;AAC/C,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACzB,IAAI,OAAO,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;AAC5C,GAAG;AACH;;;;"}