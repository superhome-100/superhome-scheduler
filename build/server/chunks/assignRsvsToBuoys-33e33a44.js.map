{"version":3,"file":"assignRsvsToBuoys-33e33a44.js","sources":["../../../.svelte-kit/adapter-node/chunks/assignRsvsToBuoys.js"],"sourcesContent":["import { b as ReservationType } from \"./settings.js\";\nconst sortBuddies = (grp) => {\n  return grp.sort((a, b) => b.maxDepth - a.maxDepth);\n};\nfunction sortBuddyGroups(buddyGrps) {\n  return buddyGrps.map((g) => sortBuddies(g)).sort((a, b) => b[0].maxDepth - a[0].maxDepth);\n}\nfunction createBuddyGroups(rsvs) {\n  let remaining = [...rsvs];\n  let grps = [];\n  let isBuddy = (a, b) => a.buddies.includes(b.user.id) && a.buoy == b.buoy;\n  let sameBuoy = (a, b) => a.buoy != \"auto\" && a.buoy == b.buoy;\n  while (remaining.length > 0) {\n    let next = remaining.splice(0, 1)[0];\n    let bg = [next];\n    for (let i = remaining.length - 1; i >= 0; i--) {\n      if (isBuddy(next, remaining[i]) || sameBuoy(next, remaining[i])) {\n        bg.push(remaining.splice(i, 1)[0]);\n      }\n    }\n    grps.push(bg);\n  }\n  return sortBuddyGroups(grps);\n}\nconst largeDepthDifference = (deepBg, shallowBg, threshold) => {\n  let deepBgMax = deepBg[0].maxDepth;\n  let shallowBgMin = shallowBg[shallowBg.length - 1].maxDepth;\n  return deepBgMax - shallowBgMin >= threshold;\n};\nconst buoysMatch = (bgA, bgB) => {\n  let buoyA = bgA[0].buoy;\n  let buoyB = bgB[0].buoy;\n  if ([buoyA, buoyB].includes(\"CBS\") || [buoyA, buoyB].includes(\"PRO_SAFETY\")) {\n    return buoyA === buoyB;\n  } else {\n    return buoyA === \"auto\" || buoyB === \"auto\" || buoyA === buoyB;\n  }\n};\nfunction createBuoyGroupsFromBuddyGroups(buddyGrps, maxDepthDiff) {\n  const buoyGrps = [];\n  for (let i = buddyGrps.length - 1; i >= 0; i--) {\n    let bg = buddyGrps[i];\n    if (bg[0].resType === ReservationType.course || bg.length >= 3) {\n      buoyGrps.push(buddyGrps.splice(i, 1)[0]);\n    }\n  }\n  const createBuoyGroup = (bgs, idxs) => {\n    const bg = bgs.reduce((acc, g) => acc.concat(g), []);\n    buoyGrps.push(sortBuddies(bg));\n    for (let i of idxs.sort().reverse()) {\n      buddyGrps.splice(i, 1);\n    }\n  };\n  const matchOne = (curBg, searchIdx, diffThresh) => {\n    if (searchIdx == buddyGrps.length) {\n      if (curBg.length == 2) {\n        createBuoyGroup([curBg], [0]);\n      } else {\n        forceAddSoloDiver(curBg[0]);\n      }\n    } else {\n      let candidateBg = buddyGrps[searchIdx];\n      if (buoysMatch(curBg, candidateBg)) {\n        let n = curBg.length + candidateBg.length;\n        if (largeDepthDifference(curBg, candidateBg, diffThresh)) {\n          if (curBg.length == 2) {\n            createBuoyGroup([curBg], [0]);\n          } else {\n            createBuoyGroup([curBg, candidateBg], [0, searchIdx]);\n          }\n        } else if (n == 2) {\n          matchOneOrTwo({\n            curBg,\n            nextBg: candidateBg,\n            nextBgIdx: searchIdx,\n            searchIdx: searchIdx + 1,\n            diffThresh\n          });\n        } else if (n == 3) {\n          createBuoyGroup([curBg, candidateBg], [0, searchIdx]);\n        } else {\n          matchOne(curBg, searchIdx + 1, diffThresh);\n        }\n      } else {\n        matchOne(curBg, searchIdx + 1, diffThresh);\n      }\n    }\n  };\n  const matchOneOrTwo = ({\n    curBg,\n    nextBg,\n    nextBgIdx,\n    searchIdx,\n    diffThresh\n  }) => {\n    if (searchIdx == buddyGrps.length) {\n      createBuoyGroup([curBg, nextBg], [0, nextBgIdx]);\n    } else {\n      let candidateBg = buddyGrps[searchIdx];\n      if (largeDepthDifference(curBg, candidateBg, diffThresh)) {\n        createBuoyGroup([curBg, nextBg], [0, nextBgIdx]);\n      } else {\n        if (buoysMatch(curBg, candidateBg)) {\n          if (candidateBg.length == 1) {\n            createBuoyGroup([curBg, nextBg, candidateBg], [0, nextBgIdx, searchIdx]);\n          } else {\n            createBuoyGroup([curBg, candidateBg], [0, searchIdx]);\n          }\n        } else {\n          matchOneOrTwo({\n            curBg,\n            nextBg,\n            nextBgIdx,\n            searchIdx: searchIdx + 1,\n            diffThresh\n          });\n        }\n      }\n    }\n  };\n  const forceAddSoloDiver = (solo) => {\n    let added = false;\n    for (let i = buoyGrps.length - 1; i >= 0; i--) {\n      let grp = buoyGrps[i];\n      if (buoysMatch(grp, [solo]) && grp[0].resType === ReservationType.autonomous) {\n        if (grp.length == 2) {\n          grp.push(solo);\n        } else {\n          let idx = grp.length - 1;\n          if (grp.filter((rsv, i2) => rsv.buddies.length == 1).length > 0) {\n            idx = grp.reduce((idx2, rsv, i2) => rsv.buddies.length == 0 ? i2 : idx2, idx);\n          }\n          let buddy = grp.splice(idx, 1)[0];\n          buoyGrps.push([buddy, solo]);\n        }\n        added = true;\n        break;\n      }\n    }\n    if (!added) {\n      buoyGrps.push([solo]);\n    }\n    buddyGrps.splice(0, 1);\n  };\n  while (buddyGrps.length > 0) {\n    matchOne(buddyGrps[0], 1, maxDepthDiff);\n  }\n  return buoyGrps;\n}\nfunction createBuoyGroups(rsvs, maxDepthDiff) {\n  let buddyGrps = createBuddyGroups(rsvs);\n  return createBuoyGroupsFromBuddyGroups(buddyGrps, maxDepthDiff);\n}\nfunction getGroupOpts(grp) {\n  let grpOpts = {\n    pulley: null,\n    // null = \"no preference\", false = \"don't want pulley\", true = \"want pulley\"\n    bottomPlate: false,\n    largeBuoy: false\n  };\n  for (let rsv of grp) {\n    grpOpts.pulley = grpOpts.pulley || rsv.pulley;\n    grpOpts.bottomPlate = grpOpts.bottomPlate || rsv.bottomPlate;\n    grpOpts.largeBuoy = grpOpts.largeBuoy || rsv.largeBuoy;\n  }\n  return grpOpts;\n}\nfunction countMatches(buoy, opts) {\n  let m = 0;\n  if (buoy.pulley && opts.pulley)\n    m++;\n  if (buoy.bottomPlate && opts.bottomPlate)\n    m++;\n  if (buoy.largeBuoy && opts.largeBuoy)\n    m++;\n  return m;\n}\nfunction assignPreAssigned(buoys, grps, assignments) {\n  const getBuoy = (grp) => {\n    return grp.reduce((buoy, rsv) => {\n      return buoy === \"auto\" ? rsv.buoy : buoy;\n    }, \"auto\");\n  };\n  for (let i = grps.length - 1; i >= 0; i--) {\n    const grp = grps[i];\n    const name = getBuoy(grp);\n    if (name !== \"auto\") {\n      for (let j = buoys.length - 1; j >= 0; j--) {\n        if (buoys[j].name === name) {\n          assignments[name] = grp;\n          grps.splice(i, 1);\n          buoys.splice(j, 1);\n          break;\n        }\n      }\n    }\n  }\n}\nfunction sortByFewestExtraOpts(candidates, grpMaxDepth, grpOpts) {\n  const numOpts = (opts) => {\n    return (opts.pulley ? 1 : 0) + (opts.bottomPlate ? 1 : 0) + (opts.largeBuoy ? 1 : 0);\n  };\n  const numExtraOpts = (buoy) => Math.max(0, numOpts(buoy) - numOpts(grpOpts));\n  const depthDiff = (buoy) => buoy.maxDepth - grpMaxDepth;\n  candidates.sort(\n    (a, b) => numExtraOpts(a.buoy) > numExtraOpts(b.buoy) ? 1 : numExtraOpts(b.buoy) > numExtraOpts(a.buoy) ? -1 : depthDiff(a.buoy) - depthDiff(b.buoy)\n  );\n}\nfunction assignAuto(buoys, grps, assignments) {\n  buoys.sort((a, b) => b.maxDepth - a.maxDepth);\n  grps.sort((a, b) => a[0].maxDepth - b[0].maxDepth);\n  while (grps.length > 0) {\n    let grp = grps[grps.length - 1];\n    let grpMaxDepth = grp[0].maxDepth;\n    let grpOpts = getGroupOpts(grp);\n    let requestNoPulley = grp[0].resType === \"course\" && grp[0].pulley == false;\n    let candidates = buoys.map((buoy, idx) => {\n      return { buoy, idx };\n    });\n    let deepEnough = candidates.filter((cand) => cand.buoy.maxDepth >= grpMaxDepth);\n    if (deepEnough.length > 0) {\n      candidates = deepEnough;\n      if (requestNoPulley) {\n        let noPulleyBuoys = candidates.filter((c) => c.buoy.pulley == false);\n        if (noPulleyBuoys.length > 0) {\n          candidates = noPulleyBuoys;\n        }\n      }\n      let maxMatches = candidates.reduce((max, cand) => {\n        let nMatches = countMatches(cand.buoy, grpOpts);\n        return nMatches > max ? nMatches : max;\n      }, 0);\n      candidates = candidates.filter((cand) => countMatches(cand.buoy, grpOpts) == maxMatches);\n      sortByFewestExtraOpts(candidates, grpMaxDepth, grpOpts);\n    }\n    let best = candidates[0];\n    assignments[best.buoy.name] = grp;\n    grps.splice(grps.length - 1, 1);\n    buoys.splice(best.idx, 1);\n    if (buoys.length == 0) {\n      break;\n    }\n  }\n}\nfunction assignBuoyGroupsToBuoys(buoys, grps) {\n  let assignments = {};\n  let remainingBuoys = [...buoys];\n  assignPreAssigned(remainingBuoys, grps, assignments);\n  assignAuto(remainingBuoys, grps, assignments);\n  return {\n    assignments,\n    unassigned: grps.reduce((flat, grp) => flat.concat(grp), [])\n  };\n}\nfunction assignRsvsToBuoys(buoys, rsvs) {\n  const shortSession = rsvs.filter((rsv) => rsv.shortSession);\n  const longSession = rsvs.filter((rsv) => !rsv.shortSession);\n  const maxDepthDiff = 15;\n  const buoyGrps = [\n    ...createBuoyGroups(shortSession, maxDepthDiff),\n    ...createBuoyGroups(longSession, maxDepthDiff)\n  ];\n  return assignBuoyGroupsToBuoys(buoys, buoyGrps);\n}\nfunction setBuoyToReservations(buoys, rsvs) {\n  const { assignments, unassigned } = assignRsvsToBuoys(buoys, rsvs);\n  const tempSubmissions = [\n    ...unassigned,\n    ...Object.entries(assignments).flatMap(\n      ([buoyName, rsvs2]) => (\n        // _buoy prevents buoy from being saved but also allows O*n rendering is possible\n        rsvs2.map((rsv) => ({ ...rsv, _buoy: buoyName }))\n      )\n    )\n  ];\n  return tempSubmissions;\n}\nexport {\n  assignRsvsToBuoys as a,\n  setBuoyToReservations as s\n};\n"],"names":[],"mappings":"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"}