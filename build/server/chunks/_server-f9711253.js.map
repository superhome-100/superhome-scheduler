{"version":3,"file":"_server-f9711253.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/downloadDatabase/_server.js"],"sourcesContent":["import { g as getBackUpZip } from \"../../../../chunks/server.js\";\nimport { g as getReservationsCsv } from \"../../../../chunks/reservation.js\";\nasync function POST({ request }) {\n  let { branch, table } = await request.json();\n  if (table === \"Reservations\") {\n    let csv = await getReservationsCsv(branch);\n    return new Response(csv, {\n      status: 200,\n      headers: {\n        \"Content-type\": \"text/csv; charset=UTF-8\",\n        \"Content-Disposition\": `attachment; filename=reservations-${branch}.csv`\n      }\n    });\n  } else {\n    let zip = await getBackUpZip(branch);\n    return zip.generateAsync({ type: \"blob\" }).then(function(content) {\n      return new Response(content, {\n        status: 200,\n        headers: {\n          \"Content-type\": \"zip; charset=UTF-8\",\n          \"Content-Disposition\": `attachment; filename=${branch}.zip`\n        }\n      });\n    });\n  }\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;AACjC,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AAC/C,EAAE,IAAI,KAAK,KAAK,cAAc,EAAE;AAChC,IAAI,IAAI,GAAG,GAAG,MAAM,kBAAkB,CAAC,MAAM,CAAC,CAAC;AAC/C,IAAI,OAAO,IAAI,QAAQ,CAAC,GAAG,EAAE;AAC7B,MAAM,MAAM,EAAE,GAAG;AACjB,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,yBAAyB;AACjD,QAAQ,qBAAqB,EAAE,CAAC,kCAAkC,EAAE,MAAM,CAAC,IAAI,CAAC;AAChF,OAAO;AACP,KAAK,CAAC,CAAC;AACP,GAAG,MAAM;AACT,IAAI,IAAI,GAAG,GAAG,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC;AACzC,IAAI,OAAO,GAAG,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,OAAO,EAAE;AACtE,MAAM,OAAO,IAAI,QAAQ,CAAC,OAAO,EAAE;AACnC,QAAQ,MAAM,EAAE,GAAG;AACnB,QAAQ,OAAO,EAAE;AACjB,UAAU,cAAc,EAAE,oBAAoB;AAC9C,UAAU,qBAAqB,EAAE,CAAC,qBAAqB,EAAE,MAAM,CAAC,IAAI,CAAC;AACrE,SAAS;AACT,OAAO,CAAC,CAAC;AACT,KAAK,CAAC,CAAC;AACP,GAAG;AACH;;;;"}