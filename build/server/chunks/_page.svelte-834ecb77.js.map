{"version":3,"file":"_page.svelte-834ecb77.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/single-day/pool/_day_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, h as subscribe, y as set_store_value, o as onDestroy, i as each, v as validate_component, e as escape, g as add_attribute } from \"../../../../../chunks/index3.js\";\nimport { p as page } from \"../../../../../chunks/stores.js\";\nimport \"svelte-gestures\";\nimport { S as Settings } from \"../../../../../chunks/settings.js\";\nimport { l as listenToDateSetting, a as listenOnDateUpdate, R as ReservationDialog } from \"../../../../../chunks/ReservationDialog.js\";\nimport { g as getCategoryDatePath, C as Chevron } from \"../../../../../chunks/LoadingBar.js\";\nimport { M as Modal } from \"../../../../../chunks/ExclamationCircle.js\";\nimport { a as view, s as stateLoaded, l as loginState, v as viewMode } from \"../../../../../chunks/stores2.js\";\nimport { C as CATEGORIES } from \"../../../../../chunks/constants.js\";\nimport dayjs from \"dayjs\";\nimport { D as DayHourly } from \"../../../../../chunks/DayHourly.js\";\nimport \"../../../../../chunks/firebase.js\";\nimport \"../../../../../chunks/datetimeUtils.js\";\nconst category = \"pool\";\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $$unsubscribe_page;\n  let $view, $$unsubscribe_view;\n  let $stateLoaded, $$unsubscribe_stateLoaded;\n  let $loginState, $$unsubscribe_loginState;\n  let $viewMode, $$unsubscribe_viewMode;\n  $$unsubscribe_page = subscribe(page, (value) => value);\n  $$unsubscribe_view = subscribe(view, (value) => $view = value);\n  $$unsubscribe_stateLoaded = subscribe(stateLoaded, (value) => $stateLoaded = value);\n  $$unsubscribe_loginState = subscribe(loginState, (value) => $loginState = value);\n  $$unsubscribe_viewMode = subscribe(viewMode, (value) => $viewMode = value);\n  let { data } = $$props;\n  let categories = [...CATEGORIES];\n  let refreshTs = Date.now();\n  set_store_value(view, $view = \"single-day\", $view);\n  let unsubscribe;\n  let firestoreRefreshUnsub;\n  function handleRouteChange() {\n    if (unsubscribe)\n      unsubscribe();\n    if (firestoreRefreshUnsub)\n      firestoreRefreshUnsub();\n    unsubscribe = listenToDateSetting(new Date(data.day), (setting) => {\n      !!setting.ow_am_full;\n    });\n    firestoreRefreshUnsub = listenOnDateUpdate(new Date(data.day), \"pool\", () => {\n      refreshTs = Date.now();\n    });\n  }\n  onDestroy(() => {\n    if (unsubscribe)\n      unsubscribe();\n    if (firestoreRefreshUnsub)\n      firestoreRefreshUnsub();\n  });\n  const resInfo = () => {\n    const resources = Settings.getPoolLanes(data.day);\n    const name = Settings.getPoolLabel(data.day);\n    return { resources, name };\n  };\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  {\n    handleRouteChange();\n  }\n  $$unsubscribe_page();\n  $$unsubscribe_view();\n  $$unsubscribe_stateLoaded();\n  $$unsubscribe_loginState();\n  $$unsubscribe_viewMode();\n  return `${$stateLoaded && $loginState === \"in\" ? `<div class=\"[&>*]:mx-auto flex items-center justify-between\"><div class=\"dropdown h-8 mb-4\"><label tabindex=\"0\" class=\"border border-gray-200 dark:border-gray-700 btn btn-fsh-dropdown\">Pool</label>\n\t\t\t\n\t\t\t<ul tabindex=\"0\" class=\"dropdown-content menu p-0 shadow bg-base-100 rounded-box w-fit\">${each(categories, (cat) => {\n    return `${cat !== category ? `<li><a class=\"text-xl active:bg-gray-300\"${add_attribute(\"href\", getCategoryDatePath(cat, data.day), 0)}>${escape(cat)}</a>\n\t\t\t\t\t\t</li>` : ``}`;\n  })}</ul></div>\n\t\t<div class=\"inline-flex items-center justify-between\"><span class=\"cursor-pointer\">${validate_component(Chevron, \"Chevron\").$$render($$result, { direction: \"left\", svgClass: \"h-8 w-8\" }, {}, {})}</span>\n\t\t\t<span class=\"cursor-pointer\">${validate_component(Chevron, \"Chevron\").$$render($$result, { direction: \"right\", svgClass: \"h-8 w-8\" }, {}, {})}</span>\n\t\t\t<span class=\"text-2xl ml-2\">${escape(dayjs(data.day).format(\"MMMM DD, YYYY dddd\"))}</span></div>\n\t\t<span class=\"mr-2\">${validate_component(Modal, \"Modal\").$$render($$result, {}, {}, {\n    default: () => {\n      return `${validate_component(ReservationDialog, \"ReservationDialog\").$$render(\n        $$result,\n        {\n          category,\n          dateFn: () => data.day,\n          onUpdate: () => {\n            refreshTs = Date.now();\n          }\n        },\n        {},\n        {}\n      )}`;\n    }\n  })}</span></div>\n\t<br>\n\t<div class=\"flex justify-between\"><a class=\"inline-flex items-center border border-solid border-transparent hover:border-black rounded-lg pl-1.5 pr-4 py-0 hover:text-white hover:bg-gray-700\" href=\"/multi-day/pool\"><span>${validate_component(Chevron, \"Chevron\").$$render($$result, { direction: \"left\" }, {}, {})}</span>\n\t\t\t<span class=\"xs:text-xl pb-1 whitespace-nowrap\">month view</span></a>\n\t\t${$viewMode === \"admin\" ? `<button class=\"bg-root-bg-light dark:bg-root-bg-dark px-1 py-0 font-semibold border-black dark:border-white\">Approve All\n\t\t\t</button>` : ``}</div>\n\t<br>\n\t<div class=\"w-full min-h-[500px]\">${validate_component(Modal, \"Modal\").$$render($$result, {}, {}, {\n    default: () => {\n      return `${validate_component(DayHourly, \"DayHourly\").$$render(\n        $$result,\n        {\n          category,\n          refreshTs,\n          resInfo: resInfo(),\n          date: data.day\n        },\n        {},\n        {}\n      )}`;\n    }\n  })}</div>` : ``}`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}