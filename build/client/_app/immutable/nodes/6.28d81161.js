import{S as pt,i as vt,s as gt,k as h,q as j,a as P,l as _,m as p,r as I,h as d,c as N,n as v,b as O,F as u,u as x,D as Ze,e as ie,O as ae,g as C,d as B,f as ve,R as Ne,ac as yt,y as se,z as oe,A as re,B as ne,Z as wt,v as ge,ag as Oe,Q as kt}from"../chunks/index.8e4fed50.js";import{s as Et,d as $t,c as St,S as Dt}from"../chunks/index.esm.a8d17a83.js";import{a as Mt,g as Je}from"../chunks/firebase.81e41ff6.js";import{o as Q,q as Xe,a as xe,b as At,l as Tt,r as jt,w as et}from"../chunks/stores.cbfdd944.js";import{g as tt,L as It,C as lt,a as Pt}from"../chunks/LoadingBar.e3e09623.js";import{M as Nt}from"../chunks/forms.ca44f84b.js";function at(o){let e,l,a,n=o[1]==="openwater"&&o[2].openwater.total&&st(o),r=o[1]==="pool"&&o[2].pool&&ot(o),t=o[1]==="classroom"&&o[2].classroom&&rt(o);return{c(){n&&n.c(),e=P(),r&&r.c(),l=P(),t&&t.c(),a=ie()},l(s){n&&n.l(s),e=N(s),r&&r.l(s),l=N(s),t&&t.l(s),a=ie()},m(s,i){n&&n.m(s,i),O(s,e,i),r&&r.m(s,i),O(s,l,i),t&&t.m(s,i),O(s,a,i)},p(s,i){s[1]==="openwater"&&s[2].openwater.total?n?n.p(s,i):(n=st(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[1]==="pool"&&s[2].pool?r?r.p(s,i):(r=ot(s),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),s[1]==="classroom"&&s[2].classroom?t?t.p(s,i):(t=rt(s),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},d(s){n&&n.d(s),s&&d(e),r&&r.d(s),s&&d(l),t&&t.d(s),s&&d(a)}}}function st(o){let e,l,a,n,r=o[2].openwater.AM+"",t,s,i,f,c,b,S,D=o[2].openwater.PM+"",M,V;return{c(){e=h("div"),l=h("span"),a=j("AM"),n=j(`
						+`),t=j(r),i=P(),f=h("div"),c=h("span"),b=j("PM"),S=j(`
						+`),M=j(D),this.h()},l(k){e=_(k,"DIV",{class:!0});var A=p(e);l=_(A,"SPAN",{class:!0});var z=p(l);a=I(z,"AM"),z.forEach(d),n=I(A,`
						+`),t=I(A,r),A.forEach(d),i=N(k),f=_(k,"DIV",{class:!0});var q=p(f);c=_(q,"SPAN",{class:!0});var F=p(c);b=I(F,"PM"),F.forEach(d),S=I(q,`
						+`),M=I(q,D),q.forEach(d),this.h()},h(){v(l,"class","hidden md:inline"),v(e,"class",s="mx-auto first-of-type:mt-2 first-of-type:mb-1 flex items-center justify-center text-sm rounded-xl h-6 w-10 md:w-16 px-1 rsv "+o[1]),v(c,"class","hidden md:inline"),v(f,"class",V="mx-auto first-of-type:mt-2 first-of-type:mb-1 flex items-center justify-center text-sm rounded-xl h-6 w-10 md:w-16 px-1 rsv "+o[1])},m(k,A){O(k,e,A),u(e,l),u(l,a),u(e,n),u(e,t),O(k,i,A),O(k,f,A),u(f,c),u(c,b),u(f,S),u(f,M)},p(k,A){A&4&&r!==(r=k[2].openwater.AM+"")&&x(t,r),A&2&&s!==(s="mx-auto first-of-type:mt-2 first-of-type:mb-1 flex items-center justify-center text-sm rounded-xl h-6 w-10 md:w-16 px-1 rsv "+k[1])&&v(e,"class",s),A&4&&D!==(D=k[2].openwater.PM+"")&&x(M,D),A&2&&V!==(V="mx-auto first-of-type:mt-2 first-of-type:mb-1 flex items-center justify-center text-sm rounded-xl h-6 w-10 md:w-16 px-1 rsv "+k[1])&&v(f,"class",V)},d(k){k&&d(e),k&&d(i),k&&d(f)}}}function ot(o){let e,l,a=o[2].pool+"",n,r;return{c(){e=h("div"),l=j("+"),n=j(a),this.h()},l(t){e=_(t,"DIV",{class:!0});var s=p(e);l=I(s,"+"),n=I(s,a),s.forEach(d),this.h()},h(){v(e,"class",r="mx-auto mt-4 flex items-center justify-center text-sm rounded-xl h-6 w-10 rsv "+o[1])},m(t,s){O(t,e,s),u(e,l),u(e,n)},p(t,s){s&4&&a!==(a=t[2].pool+"")&&x(n,a),s&2&&r!==(r="mx-auto mt-4 flex items-center justify-center text-sm rounded-xl h-6 w-10 rsv "+t[1])&&v(e,"class",r)},d(t){t&&d(e)}}}function rt(o){let e,l,a=o[2].classroom+"",n,r;return{c(){e=h("div"),l=j("+"),n=j(a),this.h()},l(t){e=_(t,"DIV",{class:!0});var s=p(e);l=I(s,"+"),n=I(s,a),s.forEach(d),this.h()},h(){v(e,"class",r="mx-auto mt-4 flex items-center justify-center text-sm rounded-xl h-6 w-10 rsv "+o[1])},m(t,s){O(t,e,s),u(e,l),u(e,n)},p(t,s){s&4&&a!==(a=t[2].classroom+"")&&x(n,a),s&2&&r!==(r="mx-auto mt-4 flex items-center justify-center text-sm rounded-xl h-6 w-10 rsv "+t[1])&&v(e,"class",r)},d(t){t&&d(e)}}}function Ot(o){let e,l,a,n,r=Q(o[0]).get("date")+"",t,s,i,f,c=o[2]&&at(o);return{c(){e=h("div"),l=h("a"),a=h("div"),n=h("p"),t=j(r),i=P(),c&&c.c(),this.h()},l(b){e=_(b,"DIV",{class:!0});var S=p(e);l=_(S,"A",{class:!0,href:!0});var D=p(l);a=_(D,"DIV",{class:!0});var M=p(a);n=_(M,"P",{class:!0});var V=p(n);t=I(V,r),V.forEach(d),i=N(M),c&&c.l(M),M.forEach(d),D.forEach(d),S.forEach(d),this.h()},h(){v(n,"class",s="flex justify-center w-6 m-auto "+(Q(o[0]).isSame(Q(),"date")&&"rounded-[50%] bg-stone-300 dark:bg-stone-600")),v(a,"class","h-full"),v(l,"class","no-underline"),v(l,"href",f=tt(o[1],o[0])),v(e,"class","overflow-hidden h-full")},m(b,S){O(b,e,S),u(e,l),u(l,a),u(a,n),u(n,t),u(a,i),c&&c.m(a,null)},p(b,[S]){S&1&&r!==(r=Q(b[0]).get("date")+"")&&x(t,r),S&1&&s!==(s="flex justify-center w-6 m-auto "+(Q(b[0]).isSame(Q(),"date")&&"rounded-[50%] bg-stone-300 dark:bg-stone-600"))&&v(n,"class",s),b[2]?c?c.p(b,S):(c=at(b),c.c(),c.m(a,null)):c&&(c.d(1),c=null),S&3&&f!==(f=tt(b[1],b[0]))&&v(l,"href",f)},i:Ze,o:Ze,d(b){b&&d(e),c&&c.d()}}}function Ct(o,e,l){let{date:a}=e,{category:n}=e,{summary:r}=e;return o.$$set=t=>{"date"in t&&l(0,a=t.date),"category"in t&&l(1,n=t.category),"summary"in t&&l(2,r=t.summary)},[a,n,r]}class Vt extends pt{constructor(e){super(),vt(this,e,Ct,Ot,gt,{date:0,category:1,summary:2})}}function nt(o,e,l){const a=o.slice();return a[19]=e[l],a}function it(o,e,l){const a=o.slice();return a[22]=e[l],a}function ft(o,e,l){const a=o.slice();return a[25]=e[l],a}function ct(o){let e,l;return e=new It({}),{c(){se(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,n){re(e,a,n),l=!0},i(a){l||(C(e.$$.fragment,a),l=!0)},o(a){B(e.$$.fragment,a),l=!1},d(a){ne(e,a)}}}function ut(o){let e,l,a,n=o[0].category+"",r,t,s,i,f,c,b,S,D,M,V,k,A=Xe[o[1].get("month")]+"",z,q,F,W,y,T,H,U,$,G,fe,_e,Z,be,ye,ce,we,ke,ue,Ee,$e,de,Se,De,me,Me,Ae,he,Te,je,ee,te,Ie,Ce,Pe=["pool","openwater","classroom"],Y=[];for(let m=0;m<3;m+=1)Y[m]=mt(ft(o,Pe,m));b=new lt({props:{direction:"left",svgClass:"h-6 w-6"}}),M=new lt({props:{direction:"right",svgClass:"h-6 w-6"}}),W=new Nt({props:{$$slots:{default:[Lt]},$$scope:{ctx:o}}}),W.$on("open",o[13]),W.$on("close",o[14]);let J=o[2],E=[];for(let m=0;m<J.length;m+=1)E[m]=_t(nt(o,J,m));const bt=m=>B(E[m],1,1,()=>{E[m]=null});return{c(){e=h("div"),l=h("div"),a=h("label"),r=j(n),t=P(),s=h("ul");for(let m=0;m<3;m+=1)Y[m].c();i=P(),f=h("div"),c=h("span"),se(b.$$.fragment),S=P(),D=h("span"),se(M.$$.fragment),V=P(),k=h("span"),z=j(A),q=P(),F=h("span"),se(W.$$.fragment),y=P(),T=h("div"),H=h("table"),U=h("thead"),$=h("tr"),G=h("th"),fe=j("S"),_e=P(),Z=h("th"),be=j("M"),ye=P(),ce=h("th"),we=j("T"),ke=P(),ue=h("th"),Ee=j("W"),$e=P(),de=h("th"),Se=j("T"),De=P(),me=h("th"),Me=j("F"),Ae=P(),he=h("th"),Te=j("S"),je=P(),ee=h("tbody");for(let m=0;m<E.length;m+=1)E[m].c();this.h()},l(m){e=_(m,"DIV",{class:!0});var w=p(e);l=_(w,"DIV",{class:!0});var L=p(l);a=_(L,"LABEL",{tabindex:!0,class:!0});var g=p(a);r=I(g,n),g.forEach(d),t=N(L),s=_(L,"UL",{tabindex:!0,class:!0});var K=p(s);for(let X=0;X<3;X+=1)Y[X].l(K);K.forEach(d),L.forEach(d),i=N(w),f=_(w,"DIV",{class:!0});var le=p(f);c=_(le,"SPAN",{class:!0});var Ve=p(c);oe(b.$$.fragment,Ve),Ve.forEach(d),S=N(le),D=_(le,"SPAN",{class:!0});var Le=p(D);oe(M.$$.fragment,Le),Le.forEach(d),V=N(le),k=_(le,"SPAN",{class:!0});var He=p(k);z=I(He,A),He.forEach(d),le.forEach(d),q=N(w),F=_(w,"SPAN",{class:!0});var Re=p(F);oe(W.$$.fragment,Re),Re.forEach(d),w.forEach(d),y=N(m),T=_(m,"DIV",{});var Be=p(T);H=_(Be,"TABLE",{class:!0});var pe=p(H);U=_(pe,"THEAD",{});var We=p(U);$=_(We,"TR",{});var R=p($);G=_(R,"TH",{});var Ye=p(G);fe=I(Ye,"S"),Ye.forEach(d),_e=N(R),Z=_(R,"TH",{});var Fe=p(Z);be=I(Fe,"M"),Fe.forEach(d),ye=N(R),ce=_(R,"TH",{});var qe=p(ce);we=I(qe,"T"),qe.forEach(d),ke=N(R),ue=_(R,"TH",{});var ze=p(ue);Ee=I(ze,"W"),ze.forEach(d),$e=N(R),de=_(R,"TH",{});var Ge=p(de);Se=I(Ge,"T"),Ge.forEach(d),De=N(R),me=_(R,"TH",{});var Ke=p(me);Me=I(Ke,"F"),Ke.forEach(d),Ae=N(R),he=_(R,"TH",{});var Qe=p(he);Te=I(Qe,"S"),Qe.forEach(d),R.forEach(d),We.forEach(d),je=N(pe),ee=_(pe,"TBODY",{});var Ue=p(ee);for(let X=0;X<E.length;X+=1)E[X].l(Ue);Ue.forEach(d),pe.forEach(d),Be.forEach(d),this.h()},h(){v(a,"tabindex","0"),v(a,"class","border border-gray-200 dark:border-gray-700 btn btn-fsh-dropdown"),v(s,"tabindex","0"),v(s,"class","dropdown-content menu p-0 shadow bg-base-100 rounded-box w-fit"),v(l,"class","dropdown h-8 mb-4"),v(c,"class","cursor-pointer"),v(D,"class","cursor-pointer"),v(k,"class","text-2xl"),v(f,"class","inline-flex items-center justify-between"),v(F,"class",""),v(e,"class","[&>*]:mx-auto flex items-center justify-between"),v(H,"class","calendar table-fixed border-collapse w-full")},m(m,w){O(m,e,w),u(e,l),u(l,a),u(a,r),u(l,t),u(l,s);for(let L=0;L<3;L+=1)Y[L]&&Y[L].m(s,null);u(e,i),u(e,f),u(f,c),re(b,c,null),u(f,S),u(f,D),re(M,D,null),u(f,V),u(f,k),u(k,z),u(e,q),u(e,F),re(W,F,null),O(m,y,w),O(m,T,w),u(T,H),u(H,U),u(U,$),u($,G),u(G,fe),u($,_e),u($,Z),u(Z,be),u($,ye),u($,ce),u(ce,we),u($,ke),u($,ue),u(ue,Ee),u($,$e),u($,de),u(de,Se),u($,De),u($,me),u(me,Me),u($,Ae),u($,he),u(he,Te),u(H,je),u(H,ee);for(let L=0;L<E.length;L+=1)E[L]&&E[L].m(ee,null);te=!0,Ie||(Ce=[ae(c,"click",o[8]),ae(c,"keypress",o[8]),ae(D,"click",o[9]),ae(D,"keypress",o[9]),wt(Et.call(null,T,{timeframe:300,minSwipeDistance:10,touchAction:"pan-y"})),ae(T,"swipe",o[11])],Ie=!0)},p(m,w){if((!te||w&1)&&n!==(n=m[0].category+"")&&x(r,n),w&1){Pe=["pool","openwater","classroom"];let g;for(g=0;g<3;g+=1){const K=ft(m,Pe,g);Y[g]?Y[g].p(K,w):(Y[g]=mt(K),Y[g].c(),Y[g].m(s,null))}for(;g<3;g+=1)Y[g].d(1)}(!te||w&2)&&A!==(A=Xe[m[1].get("month")]+"")&&x(z,A);const L={};if(w&268435457&&(L.$$scope={dirty:w,ctx:m}),W.$set(L),w&23){J=m[2];let g;for(g=0;g<J.length;g+=1){const K=nt(m,J,g);E[g]?(E[g].p(K,w),C(E[g],1)):(E[g]=_t(K),E[g].c(),C(E[g],1),E[g].m(ee,null))}for(ge(),g=J.length;g<E.length;g+=1)bt(g);ve()}},i(m){if(!te){C(b.$$.fragment,m),C(M.$$.fragment,m),C(W.$$.fragment,m);for(let w=0;w<J.length;w+=1)C(E[w]);te=!0}},o(m){B(b.$$.fragment,m),B(M.$$.fragment,m),B(W.$$.fragment,m),E=E.filter(Boolean);for(let w=0;w<E.length;w+=1)B(E[w]);te=!1},d(m){m&&d(e),Oe(Y,m),ne(b),ne(M),ne(W),m&&d(y),m&&d(T),Oe(E,m),Ie=!1,kt(Ce)}}}function dt(o){let e,l,a,n;return{c(){e=h("li"),l=h("a"),a=j(o[25]),n=P(),this.h()},l(r){e=_(r,"LI",{});var t=p(e);l=_(t,"A",{class:!0,href:!0});var s=p(l);a=I(s,o[25]),s.forEach(d),n=N(t),t.forEach(d),this.h()},h(){v(l,"class","text-xl active:bg-gray-300"),v(l,"href","/multi-day/"+o[25])},m(r,t){O(r,e,t),u(e,l),u(l,a),u(e,n)},d(r){r&&d(e)}}}function mt(o){let e,l=o[25]!==o[0].category&&dt(o);return{c(){l&&l.c(),e=ie()},l(a){l&&l.l(a),e=ie()},m(a,n){l&&l.m(a,n),O(a,e,n)},p(a,n){a[25]!==a[0].category?l||(l=dt(a),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&d(e)}}}function Lt(o){let e,l;return e=new $t({props:{category:o[0].category,dateFn:o[12]}}),{c(){se(e.$$.fragment)},l(a){oe(e.$$.fragment,a)},m(a,n){re(e,a,n),l=!0},p(a,n){const r={};n&1&&(r.category=a[0].category),e.$set(r)},i(a){l||(C(e.$$.fragment,a),l=!0)},o(a){B(e.$$.fragment,a),l=!1},d(a){ne(e,a)}}}function ht(o){let e,l,a,n;return l=new Vt({props:{date:o[22].toDate(),category:o[0].category,summary:o[4][et(o[22])]}}),{c(){e=h("td"),se(l.$$.fragment),this.h()},l(r){e=_(r,"TD",{class:!0});var t=p(e);oe(l.$$.fragment,t),t.forEach(d),this.h()},h(){v(e,"class",a=`border-${o[0].category}-bg-to align-top h-20 xs:h-24 border border-solid ${!o[22].isSame(o[1],"month")&&"opacity-20 border-opacity-20"}`)},m(r,t){O(r,e,t),re(l,e,null),n=!0},p(r,t){const s={};t&4&&(s.date=r[22].toDate()),t&1&&(s.category=r[0].category),t&20&&(s.summary=r[4][et(r[22])]),l.$set(s),(!n||t&7&&a!==(a=`border-${r[0].category}-bg-to align-top h-20 xs:h-24 border border-solid ${!r[22].isSame(r[1],"month")&&"opacity-20 border-opacity-20"}`))&&v(e,"class",a)},i(r){n||(C(l.$$.fragment,r),n=!0)},o(r){B(l.$$.fragment,r),n=!1},d(r){r&&d(e),ne(l)}}}function _t(o){let e,l,a,n,r=o[19],t=[];for(let i=0;i<r.length;i+=1)t[i]=ht(it(o,r,i));const s=i=>B(t[i],1,1,()=>{t[i]=null});return{c(){e=h("tr");for(let i=0;i<t.length;i+=1)t[i].c();l=P(),a=h("tr")},l(i){e=_(i,"TR",{});var f=p(e);for(let c=0;c<t.length;c+=1)t[c].l(f);l=N(f),f.forEach(d),a=_(i,"TR",{}),p(a).forEach(d)},m(i,f){O(i,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);u(e,l),O(i,a,f),n=!0},p(i,f){if(f&23){r=i[19];let c;for(c=0;c<r.length;c+=1){const b=it(i,r,c);t[c]?(t[c].p(b,f),C(t[c],1)):(t[c]=ht(b),t[c].c(),C(t[c],1),t[c].m(e,l))}for(ge(),c=r.length;c<t.length;c+=1)s(c);ve()}},i(i){if(!n){for(let f=0;f<r.length;f+=1)C(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)B(t[f]);n=!1},d(i){i&&d(e),Oe(t,i),i&&d(a)}}}function Ht(o){let e,l,a,n,r,t=o[3]&&ct(),s=o[6]&&o[7]==="in"&&ut(o);return{c(){t&&t.c(),e=P(),s&&s.c(),l=ie()},l(i){t&&t.l(i),e=N(i),s&&s.l(i),l=ie()},m(i,f){t&&t.m(i,f),O(i,e,f),s&&s.m(i,f),O(i,l,f),a=!0,n||(r=ae(window,"keydown",o[10]),n=!0)},p(i,[f]){i[3]?t?f&8&&C(t,1):(t=ct(),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(ge(),B(t,1,1,()=>{t=null}),ve()),i[6]&&i[7]==="in"?s?(s.p(i,f),f&192&&C(s,1)):(s=ut(i),s.c(),C(s,1),s.m(l.parentNode,l)):s&&(ge(),B(s,1,1,()=>{s=null}),ve())},i(i){a||(C(t),C(s),a=!0)},o(i){B(t),B(s),a=!1},d(i){t&&t.d(i),i&&d(e),s&&s.d(i),i&&d(l),n=!1,r()}}}function Rt(o,e,l){let a,n,r,t;Ne(o,xe,y=>l(15,n=y)),Ne(o,At,y=>l(6,r=y)),Ne(o,Tt,y=>l(7,t=y));let{data:s}=e,i=[...Pt];yt(xe,n="multi-day",n);let f=Q(),c=!1;function b(y=f.year(),T=f.month()){const H=Q().year(y).month(T).startOf("month"),U=H.endOf("month");let $=H.startOf("week");const G=[];for(;$<=U;){const fe=Array(7).fill(0).map((_e,Z)=>$.add(Z,"day"));G.push(fe),$=$.add(1,"week")}return G}let S={};function D(){l(1,f=f.subtract(1,"month"))}function M(){l(1,f=f.add(1,"month"))}let V=!1;function k(y){if(!V){if(y.keyCode==37)D();else if(y.keyCode==39)M();else if(y.keyCode==40){let T=i.indexOf(s.category);T=(T+1)%i.length,Je(`/multi-day/${i[T]}`)}else if(y.keyCode==38){let T=i.indexOf(s.category);T=(i.length+T-1)%i.length,Je(`/multi-day/${i[T]}`)}}}function A(y){V||(y.detail.direction==="left"?M():y.detail.direction==="right"&&D())}const z=async()=>{if(a.length){l(3,c=!0);const y=a[0],T=a[a.length-1],H=await jt(y[0].toDate(),T[T.length-1].toDate());H&&H.status==="success"&&l(4,S={...S,...H.summary}),l(3,c=!1)}},q=y=>St(Dt,y),F=()=>l(5,V=!0),W=()=>l(5,V=!1);return o.$$set=y=>{"data"in y&&l(0,s=y.data)},o.$$.update=()=>{o.$$.dirty&2&&l(2,a=b(f.get("year"),f.get("month"))),o.$$.dirty&4&&Mt.authStateReady().then(()=>{a.length&&z()})},[s,f,a,c,S,V,r,t,D,M,k,A,q,F,W]}class Gt extends pt{constructor(e){super(),vt(this,e,Rt,Ht,gt,{data:0})}}export{Gt as component};
