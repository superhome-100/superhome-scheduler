import{S as Ue,i as Be,s as Oe,e as ue,b as D,g as L,d as O,f as Ve,h as l,R as re,ac as je,C as Fe,k as m,q as oe,a as S,y as j,l as _,m as g,r as ne,c as C,z as F,n as p,F as d,A as q,O as X,Z as qe,u as He,ag as ze,B as H,Q as Ge,D as Qe,v as Ze}from"../chunks/index.8e4fed50.js";import{p as Je}from"../chunks/stores.c715e8c8.js";import{s as Ke,d as We,l as Xe,e as xe,S as Se,R as et}from"../chunks/index.esm.a8d17a83.js";import{g as Ce}from"../chunks/firebase.81e41ff6.js";import{C as $e,a as tt,g as pe}from"../chunks/LoadingBar.e3e09623.js";import{M as Re}from"../chunks/forms.ca44f84b.js";import{o as me,a as Ie,b as at,l as st,v as rt,x as ot}from"../chunks/stores.cbfdd944.js";import{D as nt}from"../chunks/DayHourly.3af5b86e.js";function Pe(r,t,a){const e=r.slice();return e[24]=t[a],e}function Ne(r){let t,a,e,o,n,u,v,i,w,k,z,R,y,ee,E,I=me(r[0].day).format("MMMM DD, YYYY dddd")+"",G,te,V,A,Q,Z,J,M,P,f,T,_e,K,he,ge,le,ie,fe,U,N,ae,be,ye,W=r[6],h=[];for(let s=0;s<W.length;s+=1)h[s]=Le(Pe(r,W,s));k=new $e({props:{direction:"left",svgClass:"h-8 w-8"}}),y=new $e({props:{direction:"right",svgClass:"h-8 w-8"}}),A=new Re({props:{$$slots:{default:[it]},$$scope:{ctx:r}}}),A.$on("open",r[14]),A.$on("close",r[15]),T=new $e({props:{direction:"left"}});let b=r[5]==="admin"&&Te(r);return N=new Re({props:{$$slots:{default:[ft]},$$scope:{ctx:r}}}),N.$on("open",r[17]),N.$on("close",r[18]),{c(){t=m("div"),a=m("div"),e=m("label"),o=oe("Classroom"),n=S(),u=m("ul");for(let s=0;s<h.length;s+=1)h[s].c();v=S(),i=m("div"),w=m("span"),j(k.$$.fragment),z=S(),R=m("span"),j(y.$$.fragment),ee=S(),E=m("span"),G=oe(I),te=S(),V=m("span"),j(A.$$.fragment),Q=S(),Z=m("br"),J=S(),M=m("div"),P=m("a"),f=m("span"),j(T.$$.fragment),_e=S(),K=m("span"),he=oe("month view"),ge=S(),b&&b.c(),le=S(),ie=m("br"),fe=S(),U=m("div"),j(N.$$.fragment),this.h()},l(s){t=_(s,"DIV",{class:!0});var c=g(t);a=_(c,"DIV",{class:!0});var Y=g(a);e=_(Y,"LABEL",{tabindex:!0,class:!0});var se=g(e);o=ne(se,"Classroom"),se.forEach(l),n=C(Y),u=_(Y,"UL",{tabindex:!0,class:!0});var $=g(u);for(let ve=0;ve<h.length;ve+=1)h[ve].l($);$.forEach(l),Y.forEach(l),v=C(c),i=_(c,"DIV",{class:!0});var B=g(i);w=_(B,"SPAN",{class:!0});var we=g(w);F(k.$$.fragment,we),we.forEach(l),z=C(B),R=_(B,"SPAN",{class:!0});var De=g(R);F(y.$$.fragment,De),De.forEach(l),ee=C(B),E=_(B,"SPAN",{class:!0});var ke=g(E);G=ne(ke,I),ke.forEach(l),B.forEach(l),te=C(c),V=_(c,"SPAN",{class:!0});var Ee=g(V);F(A.$$.fragment,Ee),Ee.forEach(l),c.forEach(l),Q=C(s),Z=_(s,"BR",{}),J=C(s),M=_(s,"DIV",{class:!0});var ce=g(M);P=_(ce,"A",{class:!0,href:!0});var de=g(P);f=_(de,"SPAN",{});var Ae=g(f);F(T.$$.fragment,Ae),Ae.forEach(l),_e=C(de),K=_(de,"SPAN",{class:!0});var Me=g(K);he=ne(Me,"month view"),Me.forEach(l),de.forEach(l),ge=C(ce),b&&b.l(ce),ce.forEach(l),le=C(s),ie=_(s,"BR",{}),fe=C(s),U=_(s,"DIV",{class:!0});var Ye=g(U);F(N.$$.fragment,Ye),Ye.forEach(l),this.h()},h(){p(e,"tabindex","0"),p(e,"class","border border-gray-200 dark:border-gray-700 btn btn-fsh-dropdown"),p(u,"tabindex","0"),p(u,"class","dropdown-content menu p-0 shadow bg-base-100 rounded-box w-fit"),p(a,"class","dropdown h-8 mb-4"),p(w,"class","cursor-pointer"),p(R,"class","cursor-pointer"),p(E,"class","text-2xl ml-2"),p(i,"class","inline-flex items-center justify-between"),p(V,"class","mr-2"),p(t,"class","[&>*]:mx-auto flex items-center justify-between"),p(K,"class","xs:text-xl pb-1 whitespace-nowrap"),p(P,"class","inline-flex items-center border border-solid border-transparent hover:border-black rounded-lg pl-1.5 pr-4 py-0 hover:text-white hover:bg-gray-700"),p(P,"href","/multi-day/classroom"),p(M,"class","flex justify-between"),p(U,"class","w-full min-h-[500px]")},m(s,c){D(s,t,c),d(t,a),d(a,e),d(e,o),d(a,n),d(a,u);for(let Y=0;Y<h.length;Y+=1)h[Y]&&h[Y].m(u,null);d(t,v),d(t,i),d(i,w),q(k,w,null),d(i,z),d(i,R),q(y,R,null),d(i,ee),d(i,E),d(E,G),d(t,te),d(t,V),q(A,V,null),D(s,Q,c),D(s,Z,c),D(s,J,c),D(s,M,c),d(M,P),d(P,f),q(T,f,null),d(P,_e),d(P,K),d(K,he),d(M,ge),b&&b.m(M,null),D(s,le,c),D(s,ie,c),D(s,fe,c),D(s,U,c),q(N,U,null),ae=!0,be||(ye=[X(w,"click",r[7]),X(w,"keypress",r[7]),X(R,"click",r[8]),X(R,"keypress",r[8]),qe(Ke.call(null,U,{timeframe:300,minSwipeDistance:10,touchAction:"pan-y"})),X(U,"swipe",r[9])],be=!0)},p(s,c){if(c&65){W=s[6];let $;for($=0;$<W.length;$+=1){const B=Pe(s,W,$);h[$]?h[$].p(B,c):(h[$]=Le(B),h[$].c(),h[$].m(u,null))}for(;$<h.length;$+=1)h[$].d(1);h.length=W.length}(!ae||c&1)&&I!==(I=me(s[0].day).format("MMMM DD, YYYY dddd")+"")&&He(G,I);const Y={};c&134217731&&(Y.$$scope={dirty:c,ctx:s}),A.$set(Y),s[5]==="admin"?b?b.p(s,c):(b=Te(s),b.c(),b.m(M,null)):b&&(b.d(1),b=null);const se={};c&134217731&&(se.$$scope={dirty:c,ctx:s}),N.$set(se)},i(s){ae||(L(k.$$.fragment,s),L(y.$$.fragment,s),L(A.$$.fragment,s),L(T.$$.fragment,s),L(N.$$.fragment,s),ae=!0)},o(s){O(k.$$.fragment,s),O(y.$$.fragment,s),O(A.$$.fragment,s),O(T.$$.fragment,s),O(N.$$.fragment,s),ae=!1},d(s){s&&l(t),ze(h,s),H(k),H(y),H(A),s&&l(Q),s&&l(Z),s&&l(J),s&&l(M),H(T),b&&b.d(),s&&l(le),s&&l(ie),s&&l(fe),s&&l(U),H(N),be=!1,Ge(ye)}}}function lt(r){let t,a,e=r[24]+"",o,n,u;return{c(){t=m("li"),a=m("a"),o=oe(e),u=S(),this.h()},l(v){t=_(v,"LI",{});var i=g(t);a=_(i,"A",{class:!0,href:!0});var w=g(a);o=ne(w,e),w.forEach(l),u=C(i),i.forEach(l),this.h()},h(){p(a,"class","text-xl active:bg-gray-300"),p(a,"href",n=pe(r[24],r[0].day))},m(v,i){D(v,t,i),d(t,a),d(a,o),d(t,u)},p(v,i){i&1&&n!==(n=pe(v[24],v[0].day))&&p(a,"href",n)},d(v){v&&l(t)}}}function Le(r){let t,a=r[24]!==x&&lt(r);return{c(){a&&a.c(),t=ue()},l(e){a&&a.l(e),t=ue()},m(e,o){a&&a.m(e,o),D(e,t,o)},p(e,o){e[24]!==x&&a.p(e,o)},d(e){a&&a.d(e),e&&l(t)}}}function it(r){let t,a;return t=new We({props:{category:x,dateFn:r[12],onUpdate:r[13]}}),{c(){j(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,o){q(t,e,o),a=!0},p(e,o){const n={};o&1&&(n.dateFn=e[12]),o&2&&(n.onUpdate=e[13]),t.$set(n)},i(e){a||(L(t.$$.fragment,e),a=!0)},o(e){O(t.$$.fragment,e),a=!1},d(e){H(t,e)}}}function Te(r){let t,a,e,o;return{c(){t=m("button"),a=oe("Approve All"),this.h()},l(n){t=_(n,"BUTTON",{class:!0});var u=g(t);a=ne(u,"Approve All"),u.forEach(l),this.h()},h(){p(t,"class","bg-root-bg-light dark:bg-root-bg-dark px-1 py-0 font-semibold border-black dark:border-white")},m(n,u){D(n,t,u),d(t,a),e||(o=X(t,"click",r[16]),e=!0)},p:Qe,d(n){n&&l(t),e=!1,o()}}}function ft(r){let t,a;return t=new nt({props:{category:x,refreshTs:r[1],resInfo:r[10](),date:r[0].day}}),{c(){j(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,o){q(t,e,o),a=!0},p(e,o){const n={};o&2&&(n.refreshTs=e[1]),o&1&&(n.date=e[0].day),t.$set(n)},i(e){a||(L(t.$$.fragment,e),a=!0)},o(e){O(t.$$.fragment,e),a=!1},d(e){H(t,e)}}}function ct(r){let t,a,e=r[3]&&r[4]==="in"&&Ne(r);return{c(){e&&e.c(),t=ue()},l(o){e&&e.l(o),t=ue()},m(o,n){e&&e.m(o,n),D(o,t,n),a=!0},p(o,[n]){o[3]&&o[4]==="in"?e?(e.p(o,n),n&24&&L(e,1)):(e=Ne(o),e.c(),L(e,1),e.m(t.parentNode,t)):e&&(Ze(),O(e,1,1,()=>{e=null}),Ve())},i(o){a||(L(e),a=!0)},o(o){O(e),a=!1},d(o){e&&e.d(o),o&&l(t)}}}const x="classroom";function dt(r,t,a){let e,o,n,u,v;re(r,Je,f=>a(11,e=f)),re(r,Ie,f=>a(22,o=f)),re(r,at,f=>a(3,n=f)),re(r,st,f=>a(4,u=f)),re(r,rt,f=>a(5,v=f));let{data:i}=t,w=[...tt],k=Date.now();je(Ie,o="single-day",o);function z(){const f=me(i.day).subtract(1,"day");Ce(pe(x,f.format("YYYY-MM-DD")))}function R(){const f=me(i.day).add(1,"day");Ce(pe(x,f.format("YYYY-MM-DD")))}let y=!1;function ee(f){y||(f.detail.direction==="left"?R():f.detail.direction==="right"&&z())}let E,I;function G(){E&&E(),I&&I(),E=Xe(new Date(i.day),f=>{f.ow_am_full}),I=xe(new Date(i.day),"classroom",()=>{a(1,k=Date.now())})}Fe(()=>{E&&E(),I&&I()});const te=()=>{const f=Se.getClassrooms(i.day),T=Se.getClassroomLabel(i.day);return{resources:f,name:T}},V=()=>i.day,A=()=>{a(1,k=Date.now())},Q=()=>a(2,y=!0),Z=()=>{a(2,y=!1),a(1,k=Date.now())},J=async()=>{await ot(et.classroom,i.day)},M=()=>a(2,y=!0),P=()=>a(2,y=!1);return r.$$set=f=>{"data"in f&&a(0,i=f.data)},r.$$.update=()=>{r.$$.dirty&2048&&G()},[i,k,y,n,u,v,w,z,R,ee,te,e,V,A,Q,Z,J,M,P]}class $t extends Ue{constructor(t){super(),Be(this,t,dt,ct,Oe,{data:0})}}export{$t as component};
