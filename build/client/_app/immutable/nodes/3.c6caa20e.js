import{S as _e,i as he,s as $e,e as re,b as S,D as X,h as p,R as ke,a4 as Re,k as v,a as O,q as C,l as b,m as E,c as U,r as I,n as $,F as c,Z as Xe,u as x,ag as ze,a1 as Me,a2 as Ce,y as z,z as Q,A as Z,O as pe,g as B,d as A,B as K,v as ge,f as ve,o as xe,P as et,T as tt,Q as Qe,ah as Ie}from"../chunks/index.8e4fed50.js";import{i as lt,t as Be,M as Te}from"../chunks/forms.ca44f84b.js";import{R as ue,a as De,S as we,m as st,b as nt,c as rt,d as at}from"../chunks/index.esm.a8d17a83.js";import{c as ot,i as Ze,j as it,u as Ke,k as Oe,m as ut,o as Ne,P as ft,t as de}from"../chunks/stores.cbfdd944.js";import{p as ct}from"../chunks/Popup.e2ab39b7.js";import{R as mt,T as dt,a as pt,b as Ue,c as Ae}from"../chunks/RsvTabs.453366a9.js";function Fe(a,e,t){const l=a.slice();return l[6]=e[t],l[8]=t,l}function Le(a){let e,t,l,s,n,o,i,u,r,d,f,_,h,g,k,y,D,L,H,se,W,m,T,R,N,V,F=a[0].category+"",j,Y,ne,ee,ae=a[0].date+"",J,P,te,oe,le,fe,ce,Pe,me=a[0].buddies,q=[];for(let M=0;M<me.length;M+=1)q[M]=Ve(Fe(a,me,M));return{c(){e=v("div"),t=v("form"),l=v("input"),n=O(),o=v("input"),u=O(),r=v("input"),f=O(),_=v("input"),g=O(),k=v("input"),D=O(),L=v("input"),se=O(),W=v("input"),T=O(),R=v("div"),N=v("span"),V=C("Really cancel "),j=C(F),Y=C(" reservation on"),ne=O(),ee=v("span"),J=C(ae),P=C("?"),te=O();for(let M=0;M<q.length;M+=1)q[M].c();oe=O(),le=v("button"),fe=C("Confirm"),this.h()},l(M){e=b(M,"DIV",{});var G=E(e);t=b(G,"FORM",{method:!0,action:!0});var w=E(t);l=b(w,"INPUT",{type:!0,name:!0}),n=U(w),o=b(w,"INPUT",{type:!0,name:!0}),u=U(w),r=b(w,"INPUT",{type:!0,name:!0}),f=U(w),_=b(w,"INPUT",{type:!0,name:!0}),g=U(w),k=b(w,"INPUT",{type:!0,name:!0}),D=U(w),L=b(w,"INPUT",{type:!0,name:!0}),se=U(w),W=b(w,"INPUT",{type:!0,name:!0}),T=U(w),R=b(w,"DIV",{class:!0});var ie=E(R);N=b(ie,"SPAN",{});var be=E(N);V=I(be,"Really cancel "),j=I(be,F),Y=I(be," reservation on"),be.forEach(p),ne=U(ie),ee=b(ie,"SPAN",{});var ye=E(ee);J=I(ye,ae),P=I(ye,"?"),ye.forEach(p),ie.forEach(p),te=U(w);for(let Ee=0;Ee<q.length;Ee+=1)q[Ee].l(w);oe=U(w),le=b(w,"BUTTON",{class:!0,type:!0});var Se=E(le);fe=I(Se,"Confirm"),Se.forEach(p),w.forEach(p),G.forEach(p),this.h()},h(){$(l,"type","hidden"),$(l,"name","id"),l.value=s=a[0].id,$(o,"type","hidden"),$(o,"name","date"),o.value=i=a[0].date,$(r,"type","hidden"),$(r,"name","category"),r.value=d=a[0].category,$(_,"type","hidden"),$(_,"name","startTime"),_.value=h=a[0].startTime,$(k,"type","hidden"),$(k,"name","endTime"),k.value=y=a[0].endTime,$(L,"type","hidden"),$(L,"name","owTime"),L.value=H=a[0].owTime,$(W,"type","hidden"),$(W,"name","buddies"),W.value=m=JSON.stringify(a[0].buddies),$(R,"class","[&>span]:inline-block my-2 text-lg dark:text-white font-semibold mr-0.5"),$(le,"class","dark:text-white dark:border-white mb-2"),$(le,"type","submit"),$(t,"method","POST"),$(t,"action","/?/cancelReservation")},m(M,G){S(M,e,G),c(e,t),c(t,l),c(t,n),c(t,o),c(t,u),c(t,r),c(t,f),c(t,_),c(t,g),c(t,k),c(t,D),c(t,L),c(t,se),c(t,W),c(t,T),c(t,R),c(R,N),c(N,V),c(N,j),c(N,Y),c(R,ne),c(R,ee),c(ee,J),c(ee,P),c(t,te);for(let w=0;w<q.length;w+=1)q[w]&&q[w].m(t,null);c(t,oe),c(t,le),c(le,fe),ce||(Pe=Xe(lt.call(null,t,a[3])),ce=!0)},p(M,G){if(G&1&&s!==(s=M[0].id)&&(l.value=s),G&1&&i!==(i=M[0].date)&&(o.value=i),G&1&&d!==(d=M[0].category)&&(r.value=d),G&1&&h!==(h=M[0].startTime)&&(_.value=h),G&1&&y!==(y=M[0].endTime)&&(k.value=y),G&1&&H!==(H=M[0].owTime)&&(L.value=H),G&1&&m!==(m=JSON.stringify(M[0].buddies))&&(W.value=m),G&1&&F!==(F=M[0].category+"")&&x(j,F),G&1&&ae!==(ae=M[0].date+"")&&x(J,ae),G&5){me=M[0].buddies;let w;for(w=0;w<me.length;w+=1){const ie=Fe(M,me,w);q[w]?q[w].p(ie,G):(q[w]=Ve(ie),q[w].c(),q[w].m(t,oe))}for(;w<q.length;w+=1)q[w].d(1);q.length=me.length}},d(M){M&&p(e),ze(q,M),ce=!1,Pe()}}}function Ve(a){let e,t,l,s=a[2][a[6]].nickname+"",n,o,i;return{c(){e=v("div"),t=v("label"),l=C("Also cancel "),n=C(s),o=C(`'s reservation
						`),i=v("input"),this.h()},l(u){e=b(u,"DIV",{});var r=E(e);t=b(r,"LABEL",{class:!0});var d=E(t);l=I(d,"Also cancel "),n=I(d,s),o=I(d,`'s reservation
						`),i=b(d,"INPUT",{type:!0,name:!0}),d.forEach(p),r.forEach(p),this.h()},h(){$(i,"type","checkbox"),$(i,"name","buddy-"+a[8]),$(t,"class","dark:text-white")},m(u,r){S(u,e,r),c(e,t),c(t,l),c(t,n),c(t,o),c(t,i)},p(u,r){r&5&&s!==(s=u[2][u[6]].nickname+"")&&x(n,s)},d(u){u&&p(e)}}}function _t(a){let e,t=a[1]&&Le(a);return{c(){t&&t.c(),e=re()},l(l){t&&t.l(l),e=re()},m(l,s){t&&t.m(l,s),S(l,e,s)},p(l,[s]){l[1]?t?t.p(l,s):(t=Le(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:X,o:X,d(l){t&&t.d(l),l&&p(e)}}}function ht(a,e,t){let l;ke(a,ot,r=>t(2,l=r));let{rsv:s}=e,{hasForm:n=!1}=e;const{close:o,hideModal:i}=Re("simple-modal"),u=({data:r})=>{let d=JSON.parse(r.get("buddies")),f=[];for(let _=0;_<d.length;_++)r.get("buddy-"+_)==="on"&&f.push(s.buddies[_]),r.delete("buddy-"+_);return r.append("cancelBuddies",JSON.stringify(f)),i(),async({result:_})=>{var h;switch(_.type){case"success":await Ze(),Be.success("Reservation canceled");break;case"failure":ct(((h=_.data)==null?void 0:h.error)||"Unknown error");break;default:console.error(_),Be.error("Could not cancel reservation!");break}o()}};return a.$$set=r=>{"rsv"in r&&t(0,s=r.rsv),"hasForm"in r&&t(1,n=r.hasForm)},[s,n,l,u]}class $t extends _e{constructor(e){super(),he(this,e,ht,_t,$e,{rsv:0,hasForm:1})}}function gt(a){let e,t,l;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(s){e=Ce(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=E(e);t=Ce(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(t).forEach(p),n.forEach(p),this.h()},h(){$(t,"stroke-linecap","round"),$(t,"stroke-linejoin","round"),$(t,"d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"),$(e,"xmlns","http://www.w3.org/2000/svg"),$(e,"fill","none"),$(e,"viewBox","0 0 24 24"),$(e,"stroke-width","1.5"),$(e,"stroke","currentColor"),$(e,"class",l="w-4 h-4 "+a[0])},m(s,n){S(s,e,n),c(e,t)},p(s,[n]){n&1&&l!==(l="w-4 h-4 "+s[0])&&$(e,"class",l)},i:X,o:X,d(s){s&&p(e)}}}function vt(a,e,t){let{svgStyle:l=""}=e;return a.$$set=s=>{"svgStyle"in s&&t(0,l=s.svgStyle)},[l]}class bt extends _e{constructor(e){super(),he(this,e,vt,gt,$e,{svgStyle:0})}}function kt(a){let e,t,l,s,n;return t=new bt({}),{c(){e=v("button"),z(t.$$.fragment),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var i=E(e);Q(t.$$.fragment,i),i.forEach(p),this.h()},h(){$(e,"class","p-1 bg-white/50 rounded-[50%]")},m(o,i){S(o,e,i),Z(t,e,null),l=!0,s||(n=pe(e,"click",a[0]),s=!0)},p:X,i(o){l||(B(t.$$.fragment,o),l=!0)},o(o){A(t.$$.fragment,o),l=!1},d(o){o&&p(e),K(t),s=!1,n()}}}function wt(a,e,t){let{rsv:l}=e;const{open:s}=Re("simple-modal"),n=()=>{s($t,{rsv:l,hasForm:!0},{closeButton:!1})};return a.$$set=o=>{"rsv"in o&&t(1,l=o.rsv)},[n,l]}class Tt extends _e{constructor(e){super(),he(this,e,wt,kt,$e,{rsv:1})}}function je(a,e,t){const l=a.slice();return l[19]=e[t].month,l[20]=e[t].rsvs,l}function Ye(a,e,t){const l=a.slice();return l[23]=e[t],l}function Je(a){let e,t,l,s;function n(f,_){if(f[1])return Et;if(f[2].length===0)return yt}let o=n(a),i=o&&o(a),u=a[2],r=[];for(let f=0;f<u.length;f+=1)r[f]=He(je(a,u,f));const d=f=>A(r[f],1,1,()=>{r[f]=null});return{c(){i&&i.c(),e=O(),t=v("table"),l=v("tbody");for(let f=0;f<r.length;f+=1)r[f].c();this.h()},l(f){i&&i.l(f),e=U(f),t=b(f,"TABLE",{class:!0});var _=E(t);l=b(_,"TBODY",{});var h=E(l);for(let g=0;g<r.length;g+=1)r[g].l(h);h.forEach(p),_.forEach(p),this.h()},h(){$(t,"class","m-auto border-separate border-spacing-y-1")},m(f,_){i&&i.m(f,_),S(f,e,_),S(f,t,_),c(t,l);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(l,null);s=!0},p(f,_){if(o!==(o=n(f))&&(i&&i.d(1),i=o&&o(f),i&&(i.c(),i.m(e.parentNode,e))),_&2037){u=f[2];let h;for(h=0;h<u.length;h+=1){const g=je(f,u,h);r[h]?(r[h].p(g,_),B(r[h],1)):(r[h]=He(g),r[h].c(),B(r[h],1),r[h].m(l,null))}for(ge(),h=u.length;h<r.length;h+=1)d(h);ve()}},i(f){if(!s){for(let _=0;_<u.length;_+=1)B(r[_]);s=!0}},o(f){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)A(r[_]);s=!1},d(f){i&&i.d(f),f&&p(e),f&&p(t),ze(r,f)}}}function yt(a){let e,t;return{c(){e=v("div"),t=C("No reservations found.")},l(l){e=b(l,"DIV",{});var s=E(e);t=I(s,"No reservations found."),s.forEach(p)},m(l,s){S(l,e,s),c(e,t)},d(l){l&&p(e)}}}function Et(a){let e,t;return{c(){e=v("div"),t=C("Loading past reservations...")},l(l){e=b(l,"DIV",{});var s=E(e);t=I(s,"Loading past reservations..."),s.forEach(p)},m(l,s){S(l,e,s),c(e,t)},d(l){l&&p(e)}}}function Dt(a){let e;function t(n,o){return n[23].price==null?Pt:Rt}let l=t(a),s=l(a);return{c(){e=v("td"),s.c(),this.h()},l(n){e=b(n,"TD",{class:!0});var o=E(e);s.l(o),o.forEach(p),this.h()},h(){$(e,"class","text-white text-sm font-semibold rounded-e-xl")},m(n,o){S(n,e,o),s.m(e,null)},p(n,o){l===(l=t(n))&&s?s.p(n,o):(s.d(1),s=l(n),s&&(s.c(),s.m(e,null)))},i:X,o:X,d(n){n&&p(e),s.d()}}}function Nt(a){let e,t,l,s,n;return t=new Te({props:{$$slots:{default:[St]},$$scope:{ctx:a}}}),{c(){e=v("td"),z(t.$$.fragment),this.h()},l(o){e=b(o,"TD",{class:!0});var i=E(e);Q(t.$$.fragment,i),i.forEach(p),this.h()},h(){$(e,"class","rounded-e-xl")},m(o,i){S(o,e,i),Z(t,e,null),l=!0,s||(n=[pe(e,"click",Ie(Ct)),pe(e,"keypress",Ie(It))],s=!0)},p(o,i){const u={};i&67108868&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(B(t.$$.fragment,o),l=!0)},o(o){A(t.$$.fragment,o),l=!1},d(o){o&&p(e),K(t),s=!1,Qe(n)}}}function Rt(a){let e,t=a[23].price+"",l;return{c(){e=C("₱"),l=C(t)},l(s){e=I(s,"₱"),l=I(s,t)},m(s,n){S(s,e,n),S(s,l,n)},p(s,n){n&4&&t!==(t=s[23].price+"")&&x(l,t)},d(s){s&&p(e),s&&p(l)}}}function Pt(a){let e;return{c(){e=C("TBD")},l(t){e=I(t,"TBD")},m(t,l){S(t,e,l)},p:X,d(t){t&&p(e)}}}function St(a){let e,t;return e=new Tt({props:{rsv:a[23]}}),{c(){z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p(l,s){const n={};s&4&&(n.rsv=l[23]),e.$set(n)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function qe(a,e){let t,l,s=Ne(e[23].date).format("D MMM")+"",n,o,i,u=e[6](e[23])+"",r,d,f,_=e[7](e[23])+"",h,g,k,y,D=e[23].status+"",L,H,se,W,m,T,R,N,V,F;const j=[Nt,Dt],Y=[];function ne(J,P){return P&4&&(W=null),W==null&&(W=!!nt(we,J[23].date,J[23].startTime,J[23].category)),W?0:1}m=ne(e,-1),T=Y[m]=j[m](e);function ee(){return e[13](e[23])}function ae(){return e[14](e[23])}return{key:a,first:null,c(){t=v("tr"),l=v("td"),n=C(s),o=O(),i=v("td"),r=C(u),d=O(),f=v("td"),h=C(_),g=O(),k=v("td"),y=v("div"),L=C(D),se=O(),T.c(),this.h()},l(J){t=b(J,"TR",{class:!0});var P=E(t);l=b(P,"TD",{class:!0});var te=E(l);n=I(te,s),te.forEach(p),o=U(P),i=b(P,"TD",{class:!0});var oe=E(i);r=I(oe,u),oe.forEach(p),d=U(P),f=b(P,"TD",{class:!0});var le=E(f);h=I(le,_),le.forEach(p),g=U(P),k=b(P,"TD",{class:!0});var fe=E(k);y=b(fe,"DIV",{class:!0});var ce=E(y);L=I(ce,D),ce.forEach(p),fe.forEach(p),se=U(P),T.l(P),P.forEach(p),this.h()},h(){$(l,"class","rounded-s-xl text-white text-sm font-semibold"),$(i,"class","text-white text-sm font-semibold"),$(f,"class","text-white text-sm font-semibold"),$(y,"class",H="align-middle m-auto w-fit rounded-lg "+e[9][e[23].status]),$(k,"class","text-white text-sm font-semibold"),$(t,"class",R="[&>td]:w-24 h-10 bg-gradient-to-br "+e[4][e[23].category]+" "+e[5][e[23].category]+" cursor-pointer"),this.first=t},m(J,P){S(J,t,P),c(t,l),c(l,n),c(t,o),c(t,i),c(i,r),c(t,d),c(t,f),c(f,h),c(t,g),c(t,k),c(k,y),c(y,L),c(t,se),Y[m].m(t,null),N=!0,V||(F=[pe(t,"click",ee),pe(t,"keypress",ae)],V=!0)},p(J,P){e=J,(!N||P&4)&&s!==(s=Ne(e[23].date).format("D MMM")+"")&&x(n,s),(!N||P&4)&&u!==(u=e[6](e[23])+"")&&x(r,u),(!N||P&4)&&_!==(_=e[7](e[23])+"")&&x(h,_),(!N||P&4)&&D!==(D=e[23].status+"")&&x(L,D),(!N||P&4&&H!==(H="align-middle m-auto w-fit rounded-lg "+e[9][e[23].status]))&&$(y,"class",H);let te=m;m=ne(e,P),m===te?Y[m].p(e,P):(ge(),A(Y[te],1,1,()=>{Y[te]=null}),ve(),T=Y[m],T?T.p(e,P):(T=Y[m]=j[m](e),T.c()),B(T,1),T.m(t,null)),(!N||P&4&&R!==(R="[&>td]:w-24 h-10 bg-gradient-to-br "+e[4][e[23].category]+" "+e[5][e[23].category]+" cursor-pointer"))&&$(t,"class",R)},i(J){N||(B(T),N=!0)},o(J){A(T),N=!1},d(J){J&&p(t),Y[m].d(),V=!1,Qe(F)}}}function Ge(a){let e,t,l,s,n,o,i=a[19]+"",u,r,d,f,_,h=a[10](a[20])+"",g,k;return{c(){e=v("tr"),t=v("td"),l=v("td"),s=v("td"),n=O(),o=v("td"),u=C(i),r=C(" Total:"),d=O(),f=v("td"),_=C("₱"),g=C(h),k=O(),this.h()},l(y){e=b(y,"TR",{class:!0});var D=E(e);t=b(D,"TD",{}),E(t).forEach(p),l=b(D,"TD",{}),E(l).forEach(p),s=b(D,"TD",{}),E(s).forEach(p),n=U(D),o=b(D,"TD",{class:!0});var L=E(o);u=I(L,i),r=I(L," Total:"),L.forEach(p),d=U(D),f=b(D,"TD",{class:!0});var H=E(f);_=I(H,"₱"),g=I(H,h),H.forEach(p),k=U(D),D.forEach(p),this.h()},h(){$(o,"class","bg-rose-500 text-white text-sm font-semibold rounded-s-xl"),$(f,"class","bg-rose-500 text-white text-sm font-semibold rounded-e-xl"),$(e,"class","[&>td]:w-24 h-10")},m(y,D){S(y,e,D),c(e,t),c(e,l),c(e,s),c(e,n),c(e,o),c(o,u),c(o,r),c(e,d),c(e,f),c(f,_),c(f,g),c(e,k)},p(y,D){D&4&&i!==(i=y[19]+"")&&x(u,i),D&4&&h!==(h=y[10](y[20])+"")&&x(g,h)},d(y){y&&p(e)}}}function He(a){let e=[],t=new Map,l,s,n,o=a[20];const i=r=>r[23].id;for(let r=0;r<o.length;r+=1){let d=Ye(a,o,r),f=i(d);t.set(f,e[r]=qe(f,d))}let u=a[0]==="past"&&Ge(a);return{c(){for(let r=0;r<e.length;r+=1)e[r].c();l=O(),u&&u.c(),s=re()},l(r){for(let d=0;d<e.length;d+=1)e[d].l(r);l=U(r),u&&u.l(r),s=re()},m(r,d){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,d);S(r,l,d),u&&u.m(r,d),S(r,s,d),n=!0},p(r,d){d&1012&&(o=r[20],ge(),e=et(e,d,i,1,r,o,t,l.parentNode,tt,qe,l,Ye),ve()),r[0]==="past"?u?u.p(r,d):(u=Ge(r),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i(r){if(!n){for(let d=0;d<o.length;d+=1)B(e[d]);n=!0}},o(r){for(let d=0;d<e.length;d+=1)A(e[d]);n=!1},d(r){for(let d=0;d<e.length;d+=1)e[d].d(r);r&&p(l),u&&u.d(r),r&&p(s)}}}function Mt(a){let e,t,l=a[3]&&Je(a);return{c(){l&&l.c(),e=re()},l(s){l&&l.l(s),e=re()},m(s,n){l&&l.m(s,n),S(s,e,n),t=!0},p(s,[n]){s[3]?l?(l.p(s,n),n&8&&B(l,1)):(l=Je(s),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(ge(),A(l,1,1,()=>{l=null}),ve())},i(s){t||(B(l),t=!0)},o(s){A(l),t=!1},d(s){l&&l.d(s),s&&p(e)}}}const Ct=()=>{},It=()=>{};function Bt(a,e,t){let l,s,n;ke(a,it,m=>t(12,s=m)),ke(a,Ke,m=>t(3,n=m));let{resPeriod:o="upcoming"}=e;function i(m){let T,R=ft(),N=Oe(R);if(m.date&&m.date>N)T="upcoming";else if(m.date&&m.date<N)T="past";else{let V=0;m.category===ue.openwater?m.owTime==="AM"?V=de(we.getOpenwaterAmEndTime(m.date)):m.owTime==="PM"&&(V=de(we.getOpenwaterPmEndTime(m.date))):V=de(m.endTime),T=V&&V>=st(R)?"upcoming":"past"}return T}const u={[ue.pool]:"from-pool-bg-from",[ue.openwater]:"from-openwater-bg-from",[ue.classroom]:"from-classroom-bg-from"},r={[ue.pool]:"to-pool-bg-to",[ue.openwater]:"to-openwater-bg-to",[ue.classroom]:"to-classroom-bg-to"},d=m=>{let T=[m.category];return m.resType==="course"&&(T+=" +"+m.numStudents),T},f=m=>{const T=N=>{let F=/([0-9]+):([0-9]+)/.exec(N),j=parseInt(F[1]),Y="a";return j>=12&&(Y="p"),j>12&&(j-=12),F[2]=="00"?j+Y:j+":"+F[2]+Y};let R;return["pool","classroom"].includes(m.category)?R=" "+T(m.startTime)+"-"+T(m.endTime):m.category==="openwater"&&(R=m.owTime+" "+m.maxDepth+"m "),R},{open:_}=Re("simple-modal"),h=m=>{_(mt,{rsvs:[m],hasForm:!0})},g=(m,T)=>{let R=T==="upcoming"?1:-1;return m.sort((N,V)=>N.date>V.date||N.date===V.date&&de(N.startTime)>de(V.startTime)?R:-R)},k=(m,T,R)=>{let N=[];m==="upcoming"?N=T.filter(F=>{var j;return((j=F==null?void 0:F.user)==null?void 0:j.id)===n.id&&i(F)===m}):m==="past"&&(N=R.filter(F=>i(F)===m));const V=g(N,m);return m==="upcoming"?[{rsvs:V}]:V.reduce((F,j)=>{const Y=Ne(j.date).format("MMMM-YYYY"),ne=F.find(ee=>ee.month===Y);return ne?ne.rsvs.push(j):F.push({month:Y,rsvs:[j]}),F},[])};let y=!1,D=[];const L={[De.confirmed]:"text-status-confirmed",[De.pending]:"text-status-pending",[De.rejected]:"text-status-rejected"},H=m=>m.reduce((T,R)=>R.price?T+R.price:T,0);xe(async()=>{if(o==="past"){t(1,y=!0);const m=Oe(new Date),{userPastReservations:T}=await ut(m);t(11,D=T||[]),t(1,y=!1)}else Ze()});const se=m=>h(m),W=m=>h(m);return a.$$set=m=>{"resPeriod"in m&&t(0,o=m.resPeriod)},a.$$.update=()=>{a.$$.dirty&6145&&t(2,l=k(o,s,D))},[o,y,l,n,u,r,d,f,h,L,H,D,s,se,W]}class We extends _e{constructor(e){super(),he(this,e,Bt,Mt,$e,{resPeriod:0})}}function Ot(a){let e,t;return{c(){e=v("h1"),t=C("loading data...")},l(l){e=b(l,"H1",{});var s=E(e);t=I(s,"loading data..."),s.forEach(p)},m(l,s){S(l,e,s),c(e,t)},p:X,i:X,o:X,d(l){l&&p(e)}}}function Ut(a){var h;let e,t,l,s,n=(((h=a[1])==null?void 0:h.name)||"").split(" ")[0]+"",o,i,u,r,d,f,_;return r=new Te({props:{$$slots:{default:[At]},$$scope:{ctx:a}}}),f=new dt({props:{disableNav:a[0],$$slots:{default:[Gt]},$$scope:{ctx:a}}}),{c(){e=v("span"),t=v("span"),l=O(),s=v("span"),o=C(n),i=C("'s Reservations"),u=O(),z(r.$$.fragment),d=O(),z(f.$$.fragment),this.h()},l(g){e=b(g,"SPAN",{class:!0});var k=E(e);t=b(k,"SPAN",{}),E(t).forEach(p),l=U(k),s=b(k,"SPAN",{class:!0});var y=E(s);o=I(y,n),i=I(y,"'s Reservations"),y.forEach(p),u=U(k),Q(r.$$.fragment,k),k.forEach(p),d=U(g),Q(f.$$.fragment,g),this.h()},h(){$(s,"class","text-lg font-semibold"),$(e,"class","flex items-center justify-between mr-2")},m(g,k){S(g,e,k),c(e,t),c(e,l),c(e,s),c(s,o),c(s,i),c(e,u),Z(r,e,null),S(g,d,k),Z(f,g,k),_=!0},p(g,k){var L;(!_||k&2)&&n!==(n=(((L=g[1])==null?void 0:L.name)||"").split(" ")[0]+"")&&x(o,n);const y={};k&32&&(y.$$scope={dirty:k,ctx:g}),r.$set(y);const D={};k&1&&(D.disableNav=g[0]),k&32&&(D.$$scope={dirty:k,ctx:g}),f.$set(D)},i(g){_||(B(r.$$.fragment,g),B(f.$$.fragment,g),_=!0)},o(g){A(r.$$.fragment,g),A(f.$$.fragment,g),_=!1},d(g){g&&p(e),K(r),g&&p(d),K(f,g)}}}function At(a){let e,t;return e=new at({props:{dateFn:a[4]}}),{c(){z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p:X,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function Ft(a){let e;return{c(){e=C("Upcoming")},l(t){e=I(t,"Upcoming")},m(t,l){S(t,e,l)},d(t){t&&p(e)}}}function Lt(a){let e;return{c(){e=C("Completed")},l(t){e=I(t,"Completed")},m(t,l){S(t,e,l)},d(t){t&&p(e)}}}function Vt(a){let e,t,l,s;return e=new Ae({props:{$$slots:{default:[Ft]},$$scope:{ctx:a}}}),l=new Ae({props:{$$slots:{default:[Lt]},$$scope:{ctx:a}}}),{c(){z(e.$$.fragment),t=O(),z(l.$$.fragment)},l(n){Q(e.$$.fragment,n),t=U(n),Q(l.$$.fragment,n)},m(n,o){Z(e,n,o),S(n,t,o),Z(l,n,o),s=!0},p(n,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);const u={};o&32&&(u.$$scope={dirty:o,ctx:n}),l.$set(u)},i(n){s||(B(e.$$.fragment,n),B(l.$$.fragment,n),s=!0)},o(n){A(e.$$.fragment,n),A(l.$$.fragment,n),s=!1},d(n){K(e,n),n&&p(t),K(l,n)}}}function jt(a){let e,t;return e=new We({props:{resPeriod:"upcoming"}}),{c(){z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p:X,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function Yt(a){let e,t;return e=new Te({props:{$$slots:{default:[jt]},$$scope:{ctx:a}}}),e.$on("open",a[2]),e.$on("close",a[3]),{c(){z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p(l,s){const n={};s&32&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function Jt(a){let e,t;return e=new We({props:{resPeriod:"past"}}),{c(){z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p:X,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function qt(a){let e,t;return e=new Te({props:{$$slots:{default:[Jt]},$$scope:{ctx:a}}}),e.$on("open",a[2]),e.$on("close",a[3]),{c(){z(e.$$.fragment)},l(l){Q(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p(l,s){const n={};s&32&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function Gt(a){let e,t,l,s,n,o;return e=new pt({props:{$$slots:{default:[Vt]},$$scope:{ctx:a}}}),l=new Ue({props:{$$slots:{default:[Yt]},$$scope:{ctx:a}}}),n=new Ue({props:{$$slots:{default:[qt]},$$scope:{ctx:a}}}),{c(){z(e.$$.fragment),t=O(),z(l.$$.fragment),s=O(),z(n.$$.fragment)},l(i){Q(e.$$.fragment,i),t=U(i),Q(l.$$.fragment,i),s=U(i),Q(n.$$.fragment,i)},m(i,u){Z(e,i,u),S(i,t,u),Z(l,i,u),S(i,s,u),Z(n,i,u),o=!0},p(i,u){const r={};u&32&&(r.$$scope={dirty:u,ctx:i}),e.$set(r);const d={};u&32&&(d.$$scope={dirty:u,ctx:i}),l.$set(d);const f={};u&32&&(f.$$scope={dirty:u,ctx:i}),n.$set(f)},i(i){o||(B(e.$$.fragment,i),B(l.$$.fragment,i),B(n.$$.fragment,i),o=!0)},o(i){A(e.$$.fragment,i),A(l.$$.fragment,i),A(n.$$.fragment,i),o=!1},d(i){K(e,i),i&&p(t),K(l,i),i&&p(s),K(n,i)}}}function Ht(a){let e,t,l,s;const n=[Ut,Ot],o=[];function i(u,r){return u[1]!=null?0:1}return e=i(a),t=o[e]=n[e](a),{c(){t.c(),l=re()},l(u){t.l(u),l=re()},m(u,r){o[e].m(u,r),S(u,l,r),s=!0},p(u,[r]){let d=e;e=i(u),e===d?o[e].p(u,r):(ge(),A(o[d],1,1,()=>{o[d]=null}),ve(),t=o[e],t?t.p(u,r):(t=o[e]=n[e](u),t.c()),B(t,1),t.m(l.parentNode,l))},i(u){s||(B(t),s=!0)},o(u){A(t),s=!1},d(u){o[e].d(u),u&&p(l)}}}function zt(a,e,t){let l;ke(a,Ke,u=>t(1,l=u));let s=!1;return[s,l,()=>t(0,s=!0),()=>t(0,s=!1),u=>rt(we,u)]}class el extends _e{constructor(e){super(),he(this,e,zt,Ht,$e,{})}}export{el as component};
